---
import Contador from "./Contador.astro";
import WishList from "./WishList.astro";
import Form from "./Form.astro";
import Footer from "./Footer.astro";
import MainContainer from "./MainContainer.astro"
import AnimContainer from "./AnimContainer.astro"
import Vestimenta from "./Vestimenta.astro"
import Carrusel from "./Carrusel.astro"
import Arco from "./Arco.astro";
import Portada from "./Portada.astro";
import Date from "./Date.astro"
import Places from "./Places.astro"
import Pictures from "./Pictures.astro"
import Pilar from "./Pilar.astro"
import Despedida from "./Despedida.astro"
import Resume from "./Resume.astro"
import Card from "./Card.astro";



const misFotos = [
  "/img/foto1.jpeg",
  "/img/foto2.jpeg",
  "/img/foto3.jpeg",
  "/img/foto4.jpeg",
  "/img/foto5.jpeg"
];

---

<main id="scroll-root" class="text-[#556B2F]">
  
   <MainContainer id="portada">

    <AnimContainer title="XV años" nombre="Ángela Paulina">
      <div class="relative flex items-center justify-center w-full h-full">
        
        <!-- Arcos -->
        <Arco lado="1" />
        <Arco lado="2" />
        
        <!-- Texto introductorio -->
        <section id="start" class="relative min-h-screen w-full flex items-center justify-center overflow-hidden">
          <Portada 
          id="texto-info"
          title="quince"
          intro="Con la bendición de Dios y el amor de mi familia, me siento muy feliz de llegar a este momento de mi vida"
          parrafo="¡Los invito a compartir conmigo este día tan especial!"
          parrafo2="En compañía de mis seres queridos"
          name_1="Luis Gerardo García González"
          name_2="Sandra Elizabeth López Agüero"
          padrino="Verónica del Rocío López Agüero"
          madrina="Verónica del Rocío López Agüero"
          />  
        </section>
        
        
        <!-- <section id="fecha" class="relative min-h-screen"> -->

          <!-- Fecha del evento -->
          <Date/>
        <!-- </section> -->
        
        <!-- Lugar del evento -->
        <Places/>

        <Contador />
         
        <Pictures/>

        <Vestimenta 
          id="Vestimenta" 
          texto="Colores reservados para la Quinceañera y sus damas" />

        <WishList />

        <Despedida 
          id="desp" 
          texto="Colores reservados para la Quinceañera y sus damas" />

      </div>
  </AnimContainer>
</MainContainer>

<div class="separator">
  <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
    <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"></path>
  </svg>
</div>


<section class="bg-[#f4f7f2]">
  <Carrusel images={misFotos}/>
</section>

<Resume id="Resumen" title="Recordatorio">
  
    <Card up="Fecha" title="24 de Enero"/>
    <Card up="Misa" title="Templo de San Agustín"/>
    <Card up="Recepción" title="Salón de Eventos Casa Real"/>
    <Card up="Vestimenta" title="Formal"/>
  
</Resume>


<Pilar/>
<section class="bg-[#f4f7f2]  mt-4">
  <Form/>
</section>

<Footer>
</Footer>

  <section id="get_in_touch"  >
  </section>

<nav class="navbar" hidden>
  <button id="btn"  data-target="#portada">Inicio</button>
  <button data-target="#dia_fecha">Fecha</button>
  <button data-target="#lugar">Lugar</button>
  <button data-target="#anim_fotos">Fotos</button>
  <button data-target="#Wish">WishList</button>
  <button data-target="#get_in_touch">Confirmar</button>
</nav>

</main>

  <script>
    let btn = document.getElementById("btn")
btn.addEventListener("click", () => {
  console.log("click funciona");
});
    
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    let mm = gsap.matchMedia();

    mm.add("(min-width: 800px)", () => {
      // Animaciones para escritorio
      gsap.to(".imagen", {
        scrollTrigger: ".imagen",
        x: 100,
      });
    });

    mm.add("(max-width: 799px)", () => {
      // Animaciones para móvil
      gsap.to(".imagen", {
        scrollTrigger: ".imagen",
        x: 20,
      });
    });

    gsap.registerPlugin(ScrollTrigger);
    

    window.addEventListener("load", () => {
      const tl2 = gsap.timeline({
        defaults: {
          ease: "power3.out",
        },
      });

      // Estado inicial (no visible)
      gsap.set("#texto-portada", { opacity: 0, scale: 0.5 });
      gsap.set(".arco", { rotate: -90, opacity: 0 });
      gsap.set(".butterfly", { opacity: 0 });
      gsap.set("#f-tl, #f-tr", { y: -120, opacity: 0 });
      gsap.set(".fixed.bottom-0", { y: 120, opacity: 0 });
      gsap.set(".quince", { y: 200, opacity: 0, scale: 0.95 });
      tl2
        // Flores superiores
        .to("#f-tl, #f-tr", {
          y: 0,
          opacity: 1,
          duration: 1.2,
          stagger: 0.1,
        })

        // Flores inferiores
        .to(
          ".fixed.bottom-0",
          {
            y: 0,
            opacity: 1,
            duration: 1.2,
            stagger: 0.1,
          },
          "-=0.8",
        )

        // Arcos girando
        .to(
          ".arco-1",
          {
            rotate: 30,
            opacity: 0.6,
            duration: 1.4,
          },
          "-=0.6",
        )
        .to(
          ".arco-2",
          {
            rotate: 60,
            opacity: 0.4,
            duration: 1.4,
          },
          "-=1.2",
        )

        // Texto creciendo desde el centro
        .to(
          "#texto-portada",
          {
            opacity: 1,
            scale: 1,
            duration: 1.4,
          },
          "-=1",
        )
        .to(
          "#quince-img",
          {
            y: 0,
            opacity: 1,
            scale: 1,
            duration: 1.6,
            ease: "power4.out",
          },
          "-=0.8",
        )

        // Mariposas desde esquinas
        .fromTo(
          ".butterfly",
          {
            x: (i) => (i % 2 === 0 ? -100 : 100),
            y: (i) => (i % 2 === 0 ? -100 : 100),
            opacity: 0,
          },
          {
            x: 0,
            y: 0,
            opacity: 0.7,
            duration: 1.2,
            stagger: 0.3,
          },
          "-=1",
        );
    });


    // Timeline con scroll (reversible)
    const scrollTl = gsap.timeline({
      paused: true,
      scrollTrigger: {
        trigger: "#portada",
        start: "top top",
        end: "+=1000%",
        scrub: 2,
        pin: true,
      },
    });

    mm.add(
      {
        // Definimos nuestros breakpoints
        isDesktop: "(min-width: 800px)",
        isMobile: "(max-width: 799px)",
      },
      (context) => {
        let { isDesktop, isMobile } = context.conditions;
        //Inicio animación
        scrollTl
          // Arcos: giran y se desvanecen
          .to(
            ".arco",
            {
              rotate: "+=90",
              opacity: 0,
              ease: "power3.inOut",
            },
            0,
          )

          // Texto + corona
          .to(
            "#texto-portada",
            {
              scale: 0.85,
              y: isDesktop ? "-35vh" : "-13vh",
              ease: "power3.inOut",
              color: "#D4AF37",
            },
            0,
          )
          .to("#txt-xv", {
            fontSize: isMobile ? "var(--text-4xl)" : "var(--text-6xl)",
          })

          // Mariposas flotan y se van
          .to(
            ".butterfly",
            {
              opacity: 0,
              y: -80,
              rotate: 15,
              stagger: 0.1,
              ease: "sine.inOut",
            },
            0,
          )

          // Quince se mueve a la izquierda
          .to(
            "#quince-img",
            {
              x: isDesktop ? "-30vw" : "-40vw",
              y: isDesktop ? "-15vw" : "5vw",
              ease: "power3.inOut",
            },
            0,
          )

          // Texto del siguiente section entra
          .to(
            ".texto-info",
            {
              startAt: { x: window.innerWidth < 768 ? 20 : 100 },
              opacity: 1,
              x: isDesktop ? "35%" : "10%",
              top: isDesktop ? "20%" : 0,
              y: isDesktop ? "25%" : "5%",
              ease: "power3.inOut",
              duration: 1,
            },
            0.5,
          )
          .to({}, { duration: 1 })
          //A partir de aquí desaparecer el texto-info y aparecer el día y así sucesivamente con los otros componentes que he ido agregando
          .to(".texto-info", {
            opacity: 0,
            x: "100%",
            duration: 1,
          })
          //Animación de fecha
          .fromTo(
            ".dia_fecha",
            {
              opacity: 0,
              y: 20,
              display: "none",
            },
            {
              opacity: 1,
              ease: "power3.inOut",
              y: isDesktop ? "25%" : "5%",
              x: isDesktop ? "35%" : "10%",
              display: "flex",
              duration: 1,
              immediateRender: false,
            },
          )
          .to(".texto-dia", {
            opacity: 1,
            duration: 1,
          })
          .to(".texto-dia", {
            opacity: isDesktop ? "none" : "flex",
            duration: 1,
          })
          .to(".fecha-centro", {
            opacity: 1,

            duration: 1,
          })
          .to(".fecha-lateral", {
            opacity: 1,

            duration: 1,
          })
          .to(".fecha-centro", { color: "#D4AF37", duration: 2 })
          .to({}, { duration: 1 })
          .to(".dia_fecha", {
            opacity: 0,
            y: "100%",
            duration: 1,
            ease: "power3.inOut",
          })
          .to("#quince-img", {
            x: isDesktop ? "-50vw" : "-50vw",
            ease: "power3.inOut",
            opacity: 0,
            duration: 1,
          })
          //Animación lugar de evento
          .fromTo(
            "#lugar",
            {
              opacity: 0,
              y: -10,
              display: "none",
              duration: 1,
            },
            {
              opacity: 1,
              ease: "power3.inOut",
              y: isDesktop ? "35%" : "5%",
              x: isDesktop ? "35%" : "10%",
              display: "flex",
              duration: 1,
              immediateRender: false,
              color: "#D4AF37",
            },
          )
          .to("#titulo_Lugar", {
            opacity: 1,
            y: "5vh",
            duration: 1,
          })
          .to("#texto_Lugar", {
            opacity: 1,
            y: "5vh",
            duration: 1,
          })
          .to({},{
            duration: 2
          })
          
          .to(".snap-section1",{
            opacity: 1,
            duration: 1
          })
          .to(".card-escena1", {
            opacity: 1,
            y: "-40%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1.5,
          })
          .to(
            {},
            {
              duration: 1,
            },
          )
          .to(".card-escena1", {
            y: "-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1.5,
            display: "none",
          })
          .to(".card-escena2", {
            opacity: 1,
            display: "flex",
            y: "-40%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1.5,
          })
          .to(
            {},
            {
              duration: 1,
            },
          )
          .to(".card-escena2", {
            y: "-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1.5,
          })

          .to("#lugar", {
            opacity:0,
            duration: 1,
          })

          //Animación contador
          .fromTo(
            "#Contador",
            {
              opacity: 0,
              y: 20,
              display: "none",
            },
            {
              opacity: 1,
              ease: "power3.inOut",
              y: isDesktop ? "25%" : "5%",
              x: isDesktop ? "35%" : "10%",
              display: "flex",
              duration: 1,
              immediateRender: false,
              color: "#D4AF37",
            },
          )
          .to("#texto_Contador", {
            opacity: 1,
            duration: 1,
          })
          .to("#countdown", {
            opacity: 1,
            duration: 1,
          })
          .to("#countdown1", {
            opacity: 1,
            duration: 1,
          })
          .to("#countdown2", {
            opacity: 1,
            duration: 1,
          })
          .to("#countdown3", {
            opacity: 1,
            duration: 1,
          })
          .to("#countdown4", {
            opacity: 1,
            duration: 1,
          })
          .to(
            {},
            {
              duration: 1,
            },
          )

          .to("#Contador", {
            opacity: 0,
            display: "none",
            duration: 1,
          })

          //Animación de imagenes, quiero agregar algo más, provicional funciona igual que la demás
          .fromTo(
            isDesktop ? "#anim_fotos .reveal" : "#anim_fotos",
            {
              opacity: 0,
              y: 30,
              scale: 0.96,
            },
            {
              opacity: 1,
              y: 0,
              scale: 1,
              duration: 1.1,
              ease: "power2.out",
              stagger: 0.25,
              
            }
          ).to({},{
            duration: 1
          })
          .to("#anim_fotos",{
            opacity: isDesktop ? "0" : "1",
            y: 0,
            display: isDesktop ? "none" : "flex",
          })

          .to("#foto1",{
            opacity: isMobile ? 1 : 0,
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: isMobile ? 1 : 0,
          })
          .to({},{  
            duration: isMobile ? 1 : 0.5,
          })
          .to("#foto1",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: isMobile ? 1 : 0,
            display: "none"
          })
          .to("#foto2",{
            opacity: isMobile ? 1 : 0,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: isMobile ? 1 : 0,
          }).to({},{  
            duration: isMobile ? 1 : 0.5,
          })
          .to("#foto2",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: isMobile ? 1 : 0,
            display: "none"
            
          })
          .to("#foto3",{
            opacity: isMobile ? 1 : 0,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: isMobile ? 1 : 0,
          }).to({},{  
            duration: isMobile ? 1 : 0.5,
          })
          .to("#foto3",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: isMobile ? 1 : 0,
            display: "none"
            
          })

          //Animación para codigo de vestimenta

          .fromTo(
            "#Vestimenta",
            {
              opacity: 0,
              y: 20,
              display: "none",
            },
            {
              opacity: 1,
              ease: "power3.inOut",
              y: isDesktop ? "25%" : "5%",
              x: isDesktop ? "35%" : "10%",
              display: "flex",
              duration: 1,
              immediateRender: false,
            },
          )
          .to("#titulo_vest", {
            opacity: 1,
            duration: 1,
            color: "#D4AF37",
          })
          .to("#sbt_vest", {
            opacity: 1,
            duration: 1,
          })
          .to("#reservado", {
            opacity: 1,
            duration: 1,
          })
          .to("#colores", {
            opacity: 1,
            duration: 1,
          })
          .to(
            {},
            {
              duration: 2,
            },
          )
          .to("#colores", {
            opacity: 0,
            duration: 1,
          })
          .to("#Vestimenta", {
            opacity: 0,
            display: "none",
          })

          //Animación para wishlist

          .fromTo(
            "#Wish",
            {
              opacity: 0,
              y: 20,
              display: "none",
            },
            {
              opacity: 1,
              ease: "power3.inOut",
              y: isDesktop ? "45%" : "25%",
              x: isDesktop ? "35%" : "10%",
              display: "flex",
              duration: 1,
              immediateRender: false,
            },
          )
          .to("#txt_Wish", {
            opacity: 1,
            ease: "power2.inOut",
            duration: 1,
            color: "#D4AF37",
          })
          .to("#regalo", {
            opacity: 1,
            ease: "power2.inOut",
            duration: 1,
          })
          .to("#regalo2", {
            opacity: 1,
            ease: "power2.inOut",
            duration: 1,
          })
          .to(
            {},
            {
              duration: 1,
            },
          )
          //Aquí se abren los cards de la wishlist
          .to(".snap-section", {
            opacity: 1,
            ease: "power2.inOut",
            duration: 1,
          })
          .to("#Card1",{
            opacity: 1,
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          })
          .to({},{  
            duration: 1,
          })
          .to("#Card1",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
          })
          .to("#Card2",{
            opacity: 1,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          }).to({},{  
            duration: 1,
          })
          .to("#Card2",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
            
          })
          .to("#Card3",{
            opacity: 1,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          }).to({},{  
            duration: 1,
          })
          .to("#Card3",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
            
          })
          .to("#Card4",{
            opacity: 1,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          }).to({},{  
            duration: 1,
          })
          .to("#Card4",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
            
          })
          .to("#Card5",{
            opacity: 1,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          }).to({},{  
            duration: 1,
          })
          .to("#Card5",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
            
          })
          .to("#Card6",{
            opacity: 1,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          }).to({},{  
            duration: 1,
          })
          .to("#Card6",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
            
          })
          .to("#Card7",{
            opacity: 1,
            
            y:"-30%",
            stagger: 0.4,
            ease: "power3.out",
            duration: 1,
          }).to({},{  
            duration: 1,
          })
          .to("#Card7",{   
            y:"-60%",
            stagger: 0.4,
            opacity: 0,
            ease: "power3.out",
            duration: 1,
            display: "none"
            
          })
          
          .to("#Wish", { 
            opacity: 0,
            display: "none",
            duration: 1 })



          .to("#txt_Wish", {
            opacity: 0,
            ease: "power2.inOut",
            duration: 1,
          })
          .to("#regalo", {
            opacity: 0,
            ease: "power2.inOut",
            duration: 1,
          })
          .to("#regalo2", {
            opacity: 0,
            ease: "power2.inOut",
            duration: 1,
          })
            
          //Animación para codigo de vestimenta
          .fromTo(
            "#desp",
            {
              opacity: 0,
              y: 20,
              display: "none",
            },
            {
              opacity: 1,
              ease: "power3.inOut",
              y: isDesktop ? "25%" : "5%",
              x: isDesktop ? "35%" : "10%",
              display: "flex",
              duration: 1,
              immediateRender: false,
            },
          )
          .to("#titulo_desp", {
            opacity: 1,
            duration: 1,
            color: "#D4AF37",
            ease: "power3.inOut"
          })
          .to("#titulo_desp", {
            scale: isDesktop ? 1.5 : 1,
            duration: 1,
            color: "#D4AF37",
          })
          .to(
            {},
            {
              duration: 3,
            },
          )
        //Animación para confirmación
        // scrollTl
        //   .fromTo(
        //     "",
        //     {
        //       opacity: 0,
        //       y: 20,
        //       display: "none",
        //     },
        //     {
        //       opacity: 1,
        //       ease: "power3.inOut",
        //       y: isDesktop ? "25%" : "5%",
        //       x: isDesktop ? "35%" : "10%",
        //       display: "flex",
        //       duration: 1,
        //       immediateRender: false,
        //       color: "#D4AF37",
        //     },
        //   )
        //   .to("#get_in_touch", {
        //     opacity: 0,
        //     //Agregar animación movimiento hacia abajo
        //     duration: 1,
        //   });

        //Fin animación
      },

      
    );
    

    // const navs = gsap.utils.toArray("nav a");

    // gsap.utils.toArray(".panel").forEach((panel,i)=>{
    //   const trigger = ScrollTrigger.create({
    //     trigger: panel,
    //     start: "top top",
    //     pin: true,
    //     pinSpacing: false

    //   });

    //   const nav = navs[i]
    //   nav.addEventListener("click", function(e){
    //     e.preventDefault();
    //     gsap.to(window,{
    //       duration: 1,
    //       scrollTo: trigger.start
    //     });
    //   });
    // });

    //Contador
    const targetDate = new Date("Jan 24, 2026 20:00:00").getTime();
    setInterval(() => {
      const now = new Date().getTime();
      const diff = targetDate - now;
      if (diff <= 0) return;
      //Error, convertir a string
      document.getElementById("days").innerText = Math.floor(
        diff / (1000 * 60 * 60 * 24),
      ).toString();
      document.getElementById("hours").innerText = Math.floor(
        (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60),
      ).toString();
      document.getElementById("mins").innerText = Math.floor(
        (diff % (1000 * 60 * 60)) / (1000 * 60),
      ).toString();
      document.getElementById("segs").innerText = Math.floor(
        (diff % (1000 * 60)) / 1000,
      ).toString();
    }, 1000);

    const boton_Mapa1 = document.getElementById("btn_Map1");
    const mapa1 = document.getElementById("map-ceremonia");
    const boton_Mapa2 = document.getElementById("btn_Map2");
    const mapa2 = document.getElementById("map-recepcion");
    boton_Mapa1.addEventListener("click", () => {
      mapa1.hidden = false;
    });
    boton_Mapa2.addEventListener("click", () => {
      mapa2.hidden = false;
    });
  </script>

